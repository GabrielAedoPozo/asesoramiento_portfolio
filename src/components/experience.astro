<section class="relative py-16 sm:py-20 md:py-28 px-4 sm:px-6 bg-white overflow-hidden" aria-label="Experiencia profesional">

  <!-- fondos suaves -->
  <div class="absolute -top-40 right-0 w-64 h-64 sm:w-80 sm:h-80 md:w-[30rem] md:h-[30rem] bg-blue-500/10 rounded-full blur-3xl" aria-hidden="true"></div>
  <div class="absolute bottom-0 -left-40 w-64 h-64 sm:w-80 sm:h-80 md:w-[28rem] md:h-[28rem] bg-cyan-400/10 rounded-full blur-3xl" aria-hidden="true"></div>

  <div class="relative max-w-5xl mx-auto">

    <!-- Header -->
    <div class="mb-12 md:mb-20 text-center exp-header">
      <h2 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black mb-4 md:mb-6 text-gradient exp-title">
        Experiencia Profesional
      </h2>
      <p class="text-base sm:text-lg text-slate-600 max-w-2xl mx-auto exp-subtitle px-4">
        Trayectoria liderando procesos de transformación, eficiencia operativa
        y crecimiento sostenible en distintos sectores industriales y comerciales.
      </p>
    </div>

    <!-- Timeline -->
    <ol class="relative space-y-12 sm:space-y-16 timeline" role="list">

      <!-- Línea central -->
      <div class="timeline-line absolute left-5 md:left-1/2 top-0 bottom-0 w-px bg-gradient-to-b from-[#00013f] to-[#5daaa1] md:-translate-x-1/2" aria-hidden="true"></div>

      <!-- ITEM 1 -->
      <li class="timeline-item relative pl-16 sm:pl-20 md:w-1/2 md:ml-auto md:pl-0">
        <span class="dot absolute left-3 top-4 w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-[#00013f] ring-4 ring-white" aria-hidden="true"></span>
        <article class="card bg-white border border-slate-200 rounded-2xl p-4 sm:p-6 shadow-sm">
          <h3 class="text-lg sm:text-xl font-bold">Bely Fashion Accesories S.A.C</h3>
          <p class="text-xs sm:text-sm font-semibold text-[#5daaa1]"><time datetime="2024-08">Ago 2024</time> – <time datetime="2025-03">Mar 2025</time> · Asesor General</p>
          <ul class="mt-3 sm:mt-4 space-y-2 text-xs sm:text-sm list-disc list-inside text-slate-700">
            <li>Reestructuración administrativa y logística</li>
            <li>Implementación de análisis comercial</li>
            <li>Optimización de reportes y flujos internos</li>
          </ul>
        </article>
      </li>

      <!-- ITEM 2 -->
      <li class="timeline-item relative pl-16 sm:pl-20 md:w-1/2 md:mr-auto md:text-right md:pl-0">
        <span class="dot absolute left-3 top-4 md:left-auto md:right-[-9px] w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-[#00013f] ring-4 ring-white" aria-hidden="true"></span>
        <article class="card bg-white border border-slate-200 rounded-2xl p-4 sm:p-6 shadow-sm">
          <h3 class="text-lg sm:text-xl font-bold">Lavandería Delfus S.A.C</h3>
          <p class="text-xs sm:text-sm font-semibold text-[#5daaa1]"><time datetime="2023-06">Jun 2023</time> – <time datetime="2023-12">Dic 2023</time> · Asesor General</p>
          <ul class="mt-3 sm:mt-4 space-y-2 text-xs sm:text-sm list-disc list-inside text-slate-700 md:text-right">
            <li>Estandarización de procesos productivos</li>
            <li>Reorganización administrativa</li>
            <li>Implementación de línea de agua blanda</li>
          </ul>
        </article>
      </li>

      <!-- ITEM 3 -->
      <li class="timeline-item relative pl-16 sm:pl-20 md:w-1/2 md:ml-auto md:pl-0">
        <span class="dot absolute left-3 top-4 w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-[#00013f] ring-4 ring-white" aria-hidden="true"></span>
        <article class="card bg-white border border-slate-200 rounded-2xl p-4 sm:p-6 shadow-sm">
          <h3 class="text-lg sm:text-xl font-bold">Brandint S.A.C</h3>
          <p class="text-xs sm:text-sm font-semibold text-[#5daaa1]"><time datetime="2021-06">Jun 2021</time> – <time datetime="2021-12">Dic 2021</time> · Gerente de Operaciones</p>
          <ul class="mt-3 sm:mt-4 space-y-2 text-xs sm:text-sm list-disc list-inside text-slate-700">
            <li>Optimización logística y desarrollo de producto</li>
            <li>Reducción del lead time en 20%</li>
            <li>Mejora de reportes operativos</li>
          </ul>
        </article>
      </li>

      <!-- ITEM 4 -->
      <li class="timeline-item relative pl-16 sm:pl-20 md:w-1/2 md:mr-auto md:text-right md:pl-0">
        <span class="dot absolute left-3 top-4 md:left-auto md:right-[-9px] w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-[#00013f] ring-4 ring-white" aria-hidden="true"></span>
        <article class="card bg-white border border-slate-200 rounded-2xl p-4 sm:p-6 shadow-sm">
          <h3 class="text-lg sm:text-xl font-bold">Fibra de Vidrio NT S.A.C</h3>
          <p class="text-xs sm:text-sm font-semibold text-[#5daaa1]"><time datetime="2017-08">Ago 2017</time> – <time datetime="2021-05">May 2021</time> · Gerente Comercial</p>
          <ul class="mt-3 sm:mt-4 space-y-2 text-xs sm:text-sm list-disc list-inside text-slate-700 md:text-right">
            <li>Implementación del área de costos</li>
            <li>Expansión comercial regional</li>
            <li>Sistema integral de gestión</li>
          </ul>
        </article>
      </li>

      <!-- ITEM 5 -->
      <li class="timeline-item relative pl-16 sm:pl-20 md:w-1/2 md:ml-auto md:pl-0">
        <span class="dot absolute left-3 top-4 w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-[#00013f] ring-4 ring-white" aria-hidden="true"></span>
        <article class="card bg-white border border-slate-200 rounded-2xl p-4 sm:p-6 shadow-sm">
          <h3 class="text-lg sm:text-xl font-bold">Arife E.I.R.L</h3>
          <p class="text-xs sm:text-sm font-semibold text-[#5daaa1]"><time datetime="2016-03">Mar 2016</time> – <time datetime="2017-07">Jul 2017</time> · Gerente Comercial</p>
          <ul class="mt-3 sm:mt-4 space-y-2 text-xs sm:text-sm list-disc list-inside text-slate-700">
            <li>Área de importaciones y franquicia Kärcher</li>
            <li>Taller multimarca</li>
            <li>Crecimiento de ventas +60%</li>
          </ul>
        </article>
      </li>

      <!-- ITEM 6 -->
      <li class="timeline-item relative pl-16 sm:pl-20 md:w-1/2 md:mr-auto md:text-right md:pl-0">
        <span class="dot absolute left-3 top-4 md:left-auto md:right-[-9px] w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-[#00013f] ring-4 ring-white" aria-hidden="true"></span>
        <article class="card bg-white border border-slate-200 rounded-2xl p-4 sm:p-6 shadow-sm">
          <h3 class="text-lg sm:text-xl font-bold">Inversiones A-UNO S.A.C</h3>
          <p class="text-xs sm:text-sm font-semibold text-[#5daaa1]"><time datetime="2014-12">Dic 2014</time> – <time datetime="2016-01">Ene 2016</time> · Gerente Comercial</p>
          <ul class="mt-3 sm:mt-4 space-y-2 text-xs sm:text-sm list-disc list-inside text-slate-700 md:text-right">
            <li>Desarrollo de producto</li>
            <li>Estructuración de costos</li>
            <li>Ventas nacionales</li>
          </ul>
        </article>
      </li>

      <!-- ITEM 7 -->
      <li class="timeline-item relative pl-16 sm:pl-20 md:w-1/2 md:ml-auto md:pl-0">
        <span class="dot absolute left-3 top-4 w-3 h-3 sm:w-4 sm:h-4 rounded-full bg-[#00013f] ring-4 ring-white" aria-hidden="true"></span>
        <article class="card bg-white border border-slate-200 rounded-2xl p-4 sm:p-6 shadow-sm">
          <h3 class="text-lg sm:text-xl font-bold">Corporación Wama S.A.C</h3>
          <p class="text-xs sm:text-sm font-semibold text-[#5daaa1]"><time datetime="2013-02">Feb 2013</time> – <time datetime="2014-11">Nov 2014</time> · Gerente Comercial</p>
          <ul class="mt-3 sm:mt-4 space-y-2 text-xs sm:text-sm list-disc list-inside text-slate-700">
            <li>Reestructuración productiva y comercial</li>
            <li>Tecnología láser Tonello</li>
            <li>Gestión de 72 tiendas</li>
          </ul>
        </article>
      </li>

    </ol>
  </div>
</section>

<script>
import gsap from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';

gsap.registerPlugin(ScrollTrigger);

// Función para inicializar las animaciones
const initExperienceAnimations = () => {
  const timeline = document.querySelector('.timeline');
  const timelineItems = document.querySelectorAll('.timeline-item');
  const timelineLine = document.querySelector('.timeline-line');
  const titleGradient = document.querySelector('.exp-title');

  if (!timeline || timelineItems.length === 0) {
    console.warn('Experience elements not found');
    return;
  }

  // Animar título
  if (titleGradient) {
    gsap.from(titleGradient, {
      scrollTrigger: {
        trigger: '.exp-header',
        start: 'top 80%',
        toggleActions: 'play none none none'
      },
      opacity: 0,
      y: -60,
      duration: 1,
      ease: 'power3.out',
      onComplete: () => gsap.set(titleGradient, { clearProps: 'all' })
    });
  }

  // Animar línea del timeline
  if (timelineLine) {
    gsap.from(timelineLine, {
      scrollTrigger: {
        trigger: '.timeline',
        start: 'top 85%',
        toggleActions: 'play none none none'
      },
      scaleY: 0,
      transformOrigin: 'top',
      duration: 1.5,
      ease: 'power2.inOut',
      onComplete: () => gsap.set(timelineLine, { clearProps: 'all' })
    });
  }

  // Animar cada item
  timelineItems.forEach((item, i) => {
    const card = item.querySelector('.card');
    const dot = item.querySelector('.dot');
    const fromX = i % 2 === 0 ? 120 : -120;

    if (card) {
      gsap.from(card, {
        scrollTrigger: {
          trigger: item,
          start: 'top 85%',
          toggleActions: 'play none none none'
        },
        opacity: 0,
        x: fromX,
        y: 40,
        rotate: i % 2 === 0 ? 4 : -4,
        duration: 0.9,
        ease: 'power3.out',
        onComplete: () => gsap.set(card, { clearProps: 'all' })
      });
    }

    if (dot) {
      gsap.from(dot, {
        scrollTrigger: {
          trigger: item,
          start: 'top 85%',
          toggleActions: 'play none none none'
        },
        scale: 0,
        duration: 0.4,
        ease: 'back.out(2)',
        onComplete: () => gsap.set(dot, { clearProps: 'all' })
      });
    }
  });
};

// Ejecutar cuando el DOM esté listo
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initExperienceAnimations);
} else {
  setTimeout(initExperienceAnimations, 100);
}
</script>
